# Clinic.js Profiling Environment Configuration
# Optimized for performance profiling with minimal external dependencies
# Usage: Copy to .env before running clinic-profile.sh

# Core
NODE_ENV=production
PORT=3000
LOG_LEVEL=info

# AWS - LocalStack Configuration
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=test
AWS_SECRET_ACCESS_KEY=test
AWS_ENDPOINT=http://localhost:4566

# SQS - LocalStack URLs
SQS_EXPORT_JOBS_URL=http://sqs.us-east-1.localhost:4566/000000000000/export-jobs
SQS_DOWNLOAD_TASKS_URL=http://sqs.us-east-1.localhost:4566/000000000000/download-tasks
SQS_MAX_MESSAGES=10
SQS_WAIT_TIME_SECONDS=5
SQS_VISIBILITY_TIMEOUT=300

# DynamoDB
DYNAMODB_TABLE_NAME=export-job-state

# S3
S3_BUCKET_NAME=export-output-bucket
S3_PREFIX=exports/

# Export API - Using httpbin.org for testing (always available)
# httpbin.org provides reliable test endpoints without needing a local server
EXPORT_API_BASE_URL=https://httpbin.org
EXPORT_API_TIMEOUT=10000
EXPORT_API_MAX_RETRIES=1

# Worker Pool - Optimized for profiling
# Adjust WORKER_POOL_SIZE to test different scenarios:
# - 2 workers: Good for detecting blocking operations
# - 4 workers: Balanced for most profiling scenarios
# - 8 workers: High concurrency testing
WORKER_POOL_SIZE=4
MAX_CONCURRENT_JOBS=10
TEMP_DIR=/tmp/exports
MAX_FILE_SIZE_MB=1024

# Orchestrator - Reduced intervals for faster profiling
POLLING_INTERVAL_MS=5000
MAX_POLLING_ATTEMPTS=60
DISPATCH_BATCH_SIZE=10

# Notes:
# - NODE_ENV=production reduces log verbosity for cleaner profiling data
# - LOG_LEVEL=info provides balance between visibility and noise
# - Reduced timeouts and retries speed up profiling runs
# - WORKER_POOL_SIZE can be overridden: WORKER_POOL_SIZE=8 ./scripts/clinic-profile.sh doctor 100
